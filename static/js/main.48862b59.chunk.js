(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(44)},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(17),o=a.n(l),r=a(4),s=a(5),c=a(7),u=a(6),p=a(8),h=a(18),m=a.n(h),d=a(11);a(33),a(14),a(45);d.initializeApp({apiKey:"AIzaSyCUZQiXM6ys7IZQTKxh28-EJCS4_8HOczY",authDomain:"let-it-go-submission.firebaseapp.com",databaseURL:"https://let-it-go-submission.firebaseio.com",projectId:"let-it-go-submission",storageBucket:"let-it-go-submission.appspot.com",messagingSenderId:"676873668301",appId:"1:676873668301:web:adfb3a281bd39ead"});var g=d,b=a(9),f=a(2),y=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"watchLocation",value:function(){var e=this;navigator.geolocation?this.id=navigator.geolocation.watchPosition(function(t){var a=t.coords.latitude,n=t.coords.longitude;e.props.updateMyLocation(a,n),e.myLocation.setPosition({lat:a,lng:n}),e.accuracyRadius.setCenter({lat:a,lng:n}),e.accuracyRadius.setRadius(t.coords.accuracy)},function(){return console.log("No permission")},{enableHighAccuracy:!0}):console.log("no permission")}},{key:"componentDidMount",value:function(){var e=this,t={lat:1.296675,lng:103.776396};this.map=new window.google.maps.Map(document.getElementById("map"),{zoom:13,center:t}),this.myLocation=new window.google.maps.Marker({position:t,map:this.map,icon:"https://raw.githubusercontent.com/nelsontky/let-it-go/master/assets/icons/locationMarker.png"}),this.accuracyRadius=new window.google.maps.Circle({map:this.map,center:t,radius:0,fillColor:"#00F",fillOpacity:.2,strokeWeight:0}),this.map.addListener("click",function(t){e.props.handleMapClick(t.latLng.lat(),t.latLng.lng()),null!=e.marker&&e.marker.setMap(null),e.marker=new window.google.maps.Marker({position:t.latLng,map:e.map})}),this.accuracyRadius.addListener("click",function(t){e.props.handleMapClick(t.latLng.lat(),t.latLng.lng()),null!=e.marker&&e.marker.setMap(null),e.marker=new window.google.maps.Marker({position:t.latLng,map:e.map})}),this.myLocation.addListener("click",function(){e.props.handleMapClick(e.myLocation.getPosition().lat(),e.myLocation.getPosition().lng()),null!=e.marker&&e.marker.setMap(null),e.marker=new window.google.maps.Marker({position:e.myLocation.getPosition(),map:e.map})});var a=this;var n=document.createElement("div");new function(e,t){var n=document.createElement("div");n.style.backgroundColor="#fff",n.style.border="2px solid #fff",n.style.borderRadius="3px",n.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",n.style.cursor="pointer",n.style.textAlign="center",n.style.marginBottom="22px",n.style.height="31px",n.title="Click to recenter the map to location",e.appendChild(n);var i=document.createElement("div");i.innerHTML="<img src='https://i.imgur.com/raFRca2.png' />",n.appendChild(i),n.addEventListener("click",function(){t.setCenter(a.myLocation.getPosition())})}(n,this.map),n.index=1,this.map.controls[window.google.maps.ControlPosition.LEFT_BOTTOM].push(n),this.watchLocation()}},{key:"componentWillUnmount",value:function(){navigator.geolocation.clearWatch(this.id)}},{key:"render",value:function(){return i.a.createElement("div",{id:"map",style:{width:"100%",height:"400px"}})}}]),t}(i.a.Component),k=function(e){var t=e.children;return i.a.createElement("div",{style:{margin:"3rem auto",maxWidth:650,padding:"0 1rem"}},t)},E=a(19),C=a.n(E),w=a(37),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={name:"",lat:0,lon:0,myLat:0,myLon:0,handicapped:!1,separateHandicapped:!1,hose:!1,showerHeads:!1,male:!1,female:!1,waterCooler:!1,progress:0,progressShown:!1,error:!1},a.fileInput=i.a.createRef(),a.db=g.firestore(),a.storage=g.storage(),a.handleInputChange=a.handleInputChange.bind(Object(f.a)(a)),a.handleMapClick=a.handleMapClick.bind(Object(f.a)(a)),a.updateMyLocation=a.updateMyLocation.bind(Object(f.a)(a)),a.setToCurrentLocation=a.setToCurrentLocation.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleInputChange",value:function(e){var t,a="checkbox"===e.target.type?e.target.checked:e.target.value;"handicapped"!==e.target.name?this.setState(Object(b.a)({},e.target.name,a)):this.setState((t={},Object(b.a)(t,e.target.name,a),Object(b.a)(t,"separateHandicapped",a&&this.state.separateHandicapped),t))}},{key:"handleMapClick",value:function(e,t){this.setState({lat:e,lon:t})}},{key:"updateMyLocation",value:function(e,t){this.setState({myLat:e,myLon:t})}},{key:"setToCurrentLocation",value:function(e){e.preventDefault(),this.setState({lat:this.state.myLat,lon:this.state.myLon})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),null!=this.fileInput.current.files[0]&&/image\/*/g.test(this.fileInput.current.files[0].type)?C.a.imageFileResizer(this.fileInput.current.files[0],4096,4096,"JPEG",70,0,function(e){t.setState({progressShown:!0});var a=t.storage.ref().child(w(t.state.name+"-")).put(e);a.on(g.storage.TaskEvent.STATE_CHANGED,function(e){var a=e.bytesTransferred/e.totalBytes*100;t.setState({progress:a})},function(e){t.setState({error:!0})},function(){a.snapshot.ref.getDownloadURL().then(function(e){var a=t.db.collection("users").doc(t.props.uid);a.set({uid:t.props.uid}),a.collection("submissions").doc(t.state.name).set({facilities:{female:t.state.female,handicapped:t.state.handicapped,hose:t.state.hose,male:t.state.male,separateHandicapped:t.state.separateHandicapped,showerHeads:t.state.showerHeads,waterCooler:t.state.waterCooler},lat:t.state.lat,lon:t.state.lon,name:t.state.name,paranomaUrl:e}).then(function(){return window.location.reload()})})})},"blob"):alert("Please make sure file uploaded is an image")}},{key:"render",value:function(){return i.a.createElement(k,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",null,"Name",i.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange})),i.a.createElement("br",null),i.a.createElement("button",{onClick:this.setToCurrentLocation},"Set Lat Lon to current location"),i.a.createElement("br",null),i.a.createElement("label",null,"Lat",i.a.createElement("br",null),i.a.createElement("input",{type:"text",name:"lat",value:this.state.lat,onChange:this.handleInputChange,style:{width:"50%"}})),i.a.createElement("br",null),i.a.createElement("label",null,"Lon",i.a.createElement("br",null),i.a.createElement("input",{type:"text",name:"lon",value:this.state.lon,onChange:this.handleInputChange,style:{width:"50%"}})),i.a.createElement("br",null),i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",name:"male",checked:this.state.male,onChange:this.handleInputChange}),"Male"," "),i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",name:"female",checked:this.state.female,onChange:this.handleInputChange}),"Female"," "),i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",name:"handicapped",checked:this.state.handicapped,onChange:this.handleInputChange}),"Handicapped"," "),this.state.handicapped&&i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",name:"separateHandicapped",checked:this.state.separateHandicapped,onChange:this.handleInputChange}),"Seperate Handicapped"," "),i.a.createElement("br",null),i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",name:"hose",checked:this.state.hose,onChange:this.handleInputChange}),"Hose"," "),i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",name:"showerHeads",checked:this.state.showerHeads,onChange:this.handleInputChange}),"Shower Heads"," "),i.a.createElement("label",null,i.a.createElement("input",{type:"checkbox",name:"waterCooler",checked:this.state.waterCooler,onChange:this.handleInputChange}),"Water Cooler"," "),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("label",null,"Select a paranoma image:",i.a.createElement("br",null),i.a.createElement("input",{type:"file",name:"paranomaPath",accept:"image/*",ref:this.fileInput})),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("input",{type:"submit",disabled:""===this.state.name||0===this.state.lat||0===this.state.lon,value:"Submit"}),i.a.createElement("span",null,this.state.progressShown&&" "+Math.floor(this.state.progress)+"%"),i.a.createElement("p",null,this.state.error&&"An error occured, please refresh the page and try again")),i.a.createElement(y,{handleMapClick:this.handleMapClick,updateMyLocation:this.updateMyLocation}))}}]),t}(i.a.Component),L={signInOptions:[g.auth.GoogleAuthProvider.PROVIDER_ID]},O=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isSignedIn:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unregisterAuthObserver=g.auth().onAuthStateChanged(function(t){return e.setState({isSignedIn:!!t})})}},{key:"render",value:function(){return this.state.isSignedIn?i.a.createElement("div",null,i.a.createElement(v,{uid:g.auth().currentUser.uid}),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("button",{onClick:function(){return g.auth().signOut()}},"Sign Out"))):i.a.createElement("div",null,i.a.createElement("h1",null,"My App"),i.a.createElement("p",null,"Please sign-in:"),i.a.createElement(m.a,{uiConfig:L,firebaseAuth:g.auth()}))}}]),t}(i.a.Component),S=a(20),I=a.n(S),M=a(21),j=a.n(M),x=a(22),H=(a(43),new I.a(j.a));H.injectStyles(),Object(x.a)(H),o.a.render(i.a.createElement(O,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.48862b59.chunk.js.map